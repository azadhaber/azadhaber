<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rojin’in Vücudundaki 2 DNA’nın Bulaş Olmadığı Kesinleşti – Azad Haber</title>
<link rel="stylesheet" href="../style.css">
<style>
body { font-family: Arial; margin:0; background:#f8f8f8; color:#333;}
.ust-bar{background:#2d2d2d;color:white;display:flex;justify-content:space-between;align-items:center;padding:15px 40px;}
.menu a{color:white;margin:0 15px;text-decoration:none;font-weight:bold;}
.menu a.aktif{color:#e63946;}
.son-dakika{background:#e63946;color:white;padding:8px 20px;font-weight:bold;}
.icerik{max-width:900px;margin:20px auto;padding:15px;background:white;box-shadow:0 0 5px rgba(0,0,0,0.1);}
.haber-gorsel{width:100%;border-radius:5px;margin:15px 0;}
.geri{display:inline-block;padding:8px 15px;background:#e60000;color:white;text-decoration:none;border-radius:3px;margin-bottom:20px;}
.comment-box, .comment-list{max-width:900px;margin:20px auto;padding:15px;background:white;box-shadow:0 0 5px rgba(0,0,0,0.1);border-radius:5px;}
.comment-box textarea{width:100%;min-height:80px;padding:10px;border-radius:3px;border:1px solid #ccc;margin-bottom:10px;}
.comment-box button{padding:8px 15px;background:#e63946;color:white;border:none;border-radius:3px;cursor:pointer;}
.single-comment{border-bottom:1px solid #eee;padding:8px 0;}
.alt-bilgi{background:#333;color:white;text-align:center;padding:15px 0;margin-top:20px;}
</style>
</head>
<body>

<header class="ust-bar">
<div class="logo"><img src="../img/logo.png" alt="Logo"></div>
<nav class="menu">
<ul>
<li><a href="../index.html">Ana Sayfa</a></li>
<li><a href="../haber.html" class="aktif">Haberler</a></li>
<li><a href="../iletisim.html">İletişim</a></li>
</ul>
</nav>
</header>

<div class="son-dakika"><span class="etiket">SON DAKİKA:</span> <span id="son-dakika-yazi">Diyarbakır’da kültürel etkinlikler artıyor...</span></div>

<main class="icerik">
<article class="haber-detay">
<h2>Rojin’in Vücudundaki 2 DNA’nın Bulaş Olmadığı Kesinleşti</h2>
<p class="haber-tarih">13 Kasım 2025 – Görüntülenme: <span id="goruntulenme2">0</span></p>
<img src="../img/haber3.jpg" alt="Rojin’in haberi" class="haber-gorsel">
<p>Diyarbakır’da büyük yankı uyandıran olayda...</p>
<a href="../index.html" class="geri">← Ana Sayfaya Dön</a>
</article>
</main>

<div class="comment-box">
<h3>Yorum Yap</h3>
<textarea id="commentInput" placeholder="Yorum yaz..."></textarea>
<button id="commentBtn">Gönder</button>
</div>

<div class="comment-list" id="commentList">
<h3>Yorumlar</h3>
</div>

<footer class="alt-bilgi">
<p>© 2025 Azad Haber | Tüm Hakları Saklıdır</p>
<p><a href="../hakkımızda.html">Hakkımızda</a></p>
</footer>

<script>
const haberler = [
"Diyarbakır’da kültürel etkinlikler artıyor...",
"Ekonomi: Yeni teşvik paketi açıklandı.",
"Meteoroloji: Güneydoğu’da yağış bekleniyor.",
"Diyarbakırspor galibiyetle sezona başladı!",
"Sur ilçesinde tarihi restorasyon çalışmaları hızlandı."
];
let index=0;
const yaziAlani=document.getElementById("son-dakika-yazi");
setInterval(()=>{index=(index+1)%haberler.length;yaziAlani.textContent=haberler[index];},10000);
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getDatabase, ref, push, onValue, get, set } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

const firebaseConfig = {
apiKey: "AIzaSyBK6_U6iG0AXgVb3NbNSXhf_2S3fWw9wsc",
authDomain: "azadhaber1.firebaseapp.com",
databaseURL: "https://azadhaber1-default-rtdb.firebaseio.com",
projectId: "azadhaber1",
storageBucket: "azadhaber1.firebasestorage.app",
messagingSenderId: "307978936562",
appId: "1:307978936562:web:7eb007183210681d6d306b",
measurementId: "G-MX88RBRPBR"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// Sayfa için unique key
const pageKey = "haber2"; // manuel key, path karmaşasından kurtarır

// ------------------
// 1) Görüntüleme sayacı
// ------------------
const viewRef = ref(db, "views/" + pageKey);
get(viewRef).then(snapshot=>{
let count = snapshot.exists() ? snapshot.val() : 0;
count++;
set(viewRef,count);
document.getElementById("goruntulenme2").textContent=count;
});

// ------------------
// 2) Yorumlar
// ------------------
const commentRef = ref(db, "comments/" + pageKey);
const commentList = document.getElementById("commentList");
const commentBtn = document.getElementById("commentBtn");
const commentInput = document.getElementById("commentInput");

commentBtn.addEventListener("click", ()=>{
let text = commentInput.value.trim();
if(text===""){alert("Yorum boş olamaz!"); return;}
push(commentRef, text);
commentInput.value="";
});

onValue(commentRef, snapshot=>{
commentList.innerHTML="<h3>Yorumlar</h3>";
snapshot.forEach(child=>{
let div=document.createElement("div");
div.className="single-comment";
div.innerHTML=`<p>${child.val()}</p>`;
commentList.appendChild(div);
});
});
</script>

</body>
</html>
