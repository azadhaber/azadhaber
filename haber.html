<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azad Haber | GÃ¼ncel, Politika, Spor ve Daha FazlasÄ±</title>
    <link rel="icon" type="img/png" href="img/favicon.png">
    <meta name="description" content="Azad Haber, DiyarbakÄ±r ve TÃ¼rkiye'den son dakika haberler. GÃ¼ncel olaylar, ekonomi, spor ve kÃ¼ltÃ¼r haberleri.">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Ãœst MenÃ¼ -->
    <header class="ust-bar">
        <div class="logo">
            <img src="img/logo.png" alt="Logo">
        </div>
        <nav class="menu">
            <ul>
            <li><a href="index.html">Ana Sayfa</a></li>
            <li><a href="haber.html" class="aktif">Haberler</a></li>
            <li><a href="iletisim.html">Ä°letiÅŸim</a></li>
            </ul>
        </nav>
    </header>

    <!-- SON DAKÄ°KA BAR -->
    <div class="son-dakika">
        <span class="etiket">SON DAKÄ°KA:</span>
        <span id="son-dakika-yazi">DiyarbakÄ±râ€™da kÃ¼ltÃ¼rel etkinlikler artÄ±yor...</span>
    </div>

    <!-- Ä°Ã§erik -->
    <main class="icerik">
        <!-- Haber Kategorileri -->
        <section class="haber-kategori" id="guncel">
            <h2>ğŸ•“ GÃ¼ncel</h2>
            <div class="haber-grid" id="guncelList"></div>
        </section>

        <section class="haber-kategori" id="politika">
            <h2>ğŸ›ï¸ Politika</h2>
            <div class="haber-grid" id="politikaList"></div>
        </section>

        <section class="haber-kategori" id="ekonomi">
            <h2>ğŸ’° Ekonomi</h2>
            <div class="haber-grid" id="ekonomiList"></div>
        </section>

        <section class="haber-kategori" id="spor">
            <h2>âš½ Spor</h2>
            <div class="haber-grid" id="sporList"></div>
        </section>
    </main>

    <!-- Alt Bilgi -->
    <footer class="alt-bilgi">
        <p>Â© 2025 Azad Haber | TÃ¼m HaklarÄ± SaklÄ±dÄ±r</p>
        <p><a href="hakkÄ±mÄ±zda.html">HakkÄ±mÄ±zda</a></p>
    </footer>

    <!-- JS: Son Dakika ve Firebase -->
    <script type="module">
        // Son Dakika BarÄ±
        const haberler = [
            "DiyarbakÄ±râ€™da kÃ¼ltÃ¼rel etkinlikler artÄ±yor...",
            "Ekonomi: Yeni teÅŸvik paketi aÃ§Ä±klandÄ±.",
            "Meteoroloji: GÃ¼neydoÄŸuâ€™da yaÄŸÄ±ÅŸ bekleniyor.",
            "DiyarbakÄ±rspor galibiyetle sezona baÅŸladÄ±!",
            "Sur ilÃ§esinde tarihi restorasyon Ã§alÄ±ÅŸmalarÄ± hÄ±zlandÄ±."
        ];
        let index = 0;
        const yaziAlani = document.getElementById("son-dakika-yazi");
        setInterval(() => {
            index = (index + 1) % haberler.length;
            yaziAlani.textContent = haberler[index];
        }, 10000);

        // Firebase BaÅŸlat
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBK6_U6iG0AXgVb3NbNSXhf_2S3fWw9wsc",
            authDomain: "azadhaber1.firebaseapp.com",
            databaseURL: "https://azadhaber1-default-rtdb.firebaseio.com",
            projectId: "azadhaber1",
            storageBucket: "azadhaber1.appspot.com",
            messagingSenderId: "307978936562",
            appId: "1:307978936562:web:7eb007183210681d306b",
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const kategoriMap = {
            "GÃ¼ncel": "guncelList",
            "Politika": "politikaList",
            "Ekonomi": "ekonomiList",
            "Spor": "sporList"
        };

        const haberRef = ref(db, "haberler");
        onValue(haberRef, snapshot => {
            const haberler = [];
            snapshot.forEach(child => {
                const h = child.val();
                haberler.push(h);
            });
            // Zaman sÄ±rasÄ±na gÃ¶re (son eklenen Ã¼stte)
            haberler.sort((a,b) => b.timestamp - a.timestamp);

            // Ã–nce tÃ¼m listeleri temizle
            Object.values(kategoriMap).forEach(id => document.getElementById(id).innerHTML = "");

            haberler.forEach(h => {
                // VarsayÄ±lan kategori "GÃ¼ncel" yoksa kullan
                const cat = h.category || "GÃ¼ncel";
                const container = document.getElementById(kategoriMap[cat] || "guncelList");
                const div = document.createElement("article");
                div.className = "haber";
                div.innerHTML = `
                    <img src="${h.image}" alt="${h.title}">
                    <h3>${h.title}</h3>
                    <p>${h.content}</p>
                    <a href="#">Haberi Oku</a>
                `;
                container.appendChild(div);
            });
        });
    </script>
</body>
</html>
